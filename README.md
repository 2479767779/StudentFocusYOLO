# è¯¾å ‚å­¦ç”Ÿä¸“æ³¨åº¦æ£€æŸ¥ç³»ç»Ÿ (Student Focus Monitoring System)

## ğŸ“– é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºYOLOï¼ˆYou Only Look Onceï¼‰æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è¯¾å ‚å­¦ç”Ÿä¸“æ³¨åº¦å®æ—¶ç›‘æµ‹ç³»ç»Ÿã€‚é€šè¿‡è®¡ç®—æœºè§†è§‰æŠ€æœ¯ï¼Œç³»ç»Ÿèƒ½å¤Ÿè‡ªåŠ¨æ£€æµ‹å’Œåˆ†æå­¦ç”Ÿåœ¨è¯¾å ‚ä¸Šçš„ä¸“æ³¨çŠ¶æ€ï¼Œä¸ºæ•™å¸ˆæä¾›å®æ—¶åé¦ˆå’Œæ•°æ®åˆ†æã€‚

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- **å®æ—¶äººè„¸æ£€æµ‹**ï¼šä½¿ç”¨YOLOv8æ£€æµ‹è¯¾å ‚ä¸­çš„å­¦ç”Ÿäººè„¸
- **å§¿æ€ä¼°è®¡**ï¼šåˆ†æå¤´éƒ¨å§¿æ€ã€è§†çº¿æ–¹å‘ç­‰ä¸“æ³¨åº¦æŒ‡æ ‡
- **ä¸“æ³¨åº¦è¯„åˆ†**ï¼šåŸºäºå¤šç»´åº¦ç‰¹å¾è®¡ç®—å®æ—¶ä¸“æ³¨åº¦åˆ†æ•°
- **æ•°æ®å¯è§†åŒ–**ï¼šç”Ÿæˆä¸“æ³¨åº¦è¶‹åŠ¿å›¾è¡¨å’Œç»Ÿè®¡æŠ¥å‘Š
- **å¼‚å¸¸é¢„è­¦**ï¼šæ£€æµ‹åˆ°æ³¨æ„åŠ›ä¸é›†ä¸­æ—¶åŠæ—¶æé†’æ•™å¸ˆ

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **æ·±åº¦å­¦ä¹ æ¡†æ¶**: PyTorch + Ultralytics YOLOv8
- **è®¡ç®—æœºè§†è§‰**: OpenCV, MediaPipe
- **é¢éƒ¨ç‰¹å¾åˆ†æ**: Dlib, cv2.face
- **æ•°æ®å¤„ç†**: NumPy, Pandas
- **å¯è§†åŒ–**: Matplotlib, Seaborn, Plotly
- **Webç•Œé¢**: Streamlit/FastAPI

### ç®—æ³•åŸç†
```
ä¸“æ³¨åº¦è¯„ä¼°æ¨¡å‹ = 
  é¢éƒ¨æ£€æµ‹ (YOLO) + 
  å§¿æ€ä¼°è®¡ (MediaPipe) + 
  è§†çº¿è¿½è¸ª (Dlib) + 
  æ³¨æ„åŠ›è¯„åˆ†ç®—æ³•
```

## ğŸ“¦ å®‰è£…è¦æ±‚

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- CUDA 11.8+ (æ¨èï¼Œå¯é€‰CPUæ¨¡å¼)
- 4GB+ RAM (æ¨è8GB+)
- æ‘„åƒå¤´è®¾å¤‡

### å¿«é€Ÿå®‰è£…

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/student-focus-yolo.git
cd student-focus-yolo

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
conda create -n focus_monitor python=3.9
conda activate focus_monitor

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹
python scripts/download_models.py
```

### ä¾èµ–åŒ…æ¸…å•
```txt
ultralytics==8.0.0
opencv-python==4.8.0
mediapipe==0.10.0
dlib==19.24.0
numpy==1.24.0
pandas==2.0.0
matplotlib==3.7.0
seaborn==0.12.0
plotly==5.15.0
streamlit==1.25.0
fastapi==0.103.0
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºç¡€ä½¿ç”¨ - å®æ—¶ç›‘æµ‹

```bash
# å¯åŠ¨å®æ—¶æ‘„åƒå¤´ç›‘æµ‹
python main.py --source 0 --display --save-results

# å‚æ•°è¯´æ˜
# --source 0: ä½¿ç”¨é»˜è®¤æ‘„åƒå¤´ (å¯æŒ‡å®šè§†é¢‘æ–‡ä»¶è·¯å¾„)
# --display: æ˜¾ç¤ºå®æ—¶ç”»é¢
# --save-results: ä¿å­˜æ£€æµ‹ç»“æœ
```

### 2. æ‰¹é‡åˆ†æ - è§†é¢‘æ–‡ä»¶å¤„ç†

```bash
# åˆ†æå½•åˆ¶çš„è¯¾å ‚è§†é¢‘
python scripts/evaluate.py --input videos/classroom_01.mp4 --output results/classroom_01_analysis.json
```

### 3. Webç•Œé¢ - äº¤äº’å¼ç›‘æ§

```bash
# å¯åŠ¨Webç•Œé¢
streamlit run app/dashboard.py

# æˆ–ä½¿ç”¨FastAPI
uvicorn app.api:app --reload
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
StudentFocusYOLO/
â”œâ”€â”€ ğŸ“ configs/                    # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ model_config.yaml         # æ¨¡å‹å‚æ•°
â”‚   â”œâ”€â”€ focus_scoring.yaml        # ä¸“æ³¨åº¦è¯„åˆ†è§„åˆ™
â”‚   â””â”€â”€ camera_calibration.yaml   # æ‘„åƒå¤´æ ¡å‡†
â”‚
â”œâ”€â”€ ğŸ“ data/                      # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw/                      # åŸå§‹è§†é¢‘/å›¾ç‰‡
â”‚   â”œâ”€â”€ processed/                # å¤„ç†ç»“æœ
â”‚   â””â”€â”€ models/                   # è®­ç»ƒæ¨¡å‹
â”‚
â”œâ”€â”€ ğŸ“ src/                       # æ ¸å¿ƒæºç 
â”‚   â”œâ”€â”€ detection/                # æ£€æµ‹æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ face_detector.py      # YOLOäººè„¸æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ pose_estimator.py     # å§¿æ€ä¼°è®¡
â”‚   â”‚   â””â”€â”€ gaze_tracker.py       # è§†çº¿è¿½è¸ª
â”‚   â”‚
â”‚   â”œâ”€â”€ analysis/                 # åˆ†ææ¨¡å—
â”‚   â”‚   â”œâ”€â”€ focus_analyzer.py     # ä¸“æ³¨åº¦åˆ†æ
â”‚   â”‚   â”œâ”€â”€ behavior_classifier.py # è¡Œä¸ºåˆ†ç±»
â”‚   â”‚   â””â”€â”€ statistics.py         # ç»Ÿè®¡åˆ†æ
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ video_processor.py    # è§†é¢‘å¤„ç†
â”‚   â”‚   â”œâ”€â”€ visualization.py      # å¯è§†åŒ–
â”‚   â”‚   â””â”€â”€ logger.py             # æ—¥å¿—è®°å½•
â”‚   â”‚
â”‚   â””â”€â”€ models/                   # æ¨¡å‹å®šä¹‰
â”‚       â”œâ”€â”€ yolov8_focus.py       # YOLOæ‰©å±•æ¨¡å‹
â”‚       â””â”€â”€ focus_scorer.py       # ä¸“æ³¨åº¦è¯„åˆ†å™¨
â”‚
â”œâ”€â”€ ğŸ“ app/                       # åº”ç”¨ç•Œé¢
â”‚   â”œâ”€â”€ dashboard.py              # Streamlitä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ api.py                    # FastAPIæ¥å£
â”‚   â””â”€â”€ static/                   # é™æ€èµ„æº
â”‚
â”œâ”€â”€ ğŸ“ scripts/                   # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ download_models.py        # ä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹
â”‚   â”œâ”€â”€ train_custom_model.py     # è®­ç»ƒè‡ªå®šä¹‰æ¨¡å‹
â”‚   â””â”€â”€ evaluate.py               # æ¨¡å‹è¯„ä¼°
â”‚
â”œâ”€â”€ ğŸ“ tests/                     # æµ‹è¯•ä»£ç 
â”œâ”€â”€ ğŸ“ docs/                      # æ–‡æ¡£
â”œâ”€â”€ ğŸ“ results/                   # ç»“æœè¾“å‡º
â”‚
â”œâ”€â”€ requirements.txt              # ä¾èµ–åŒ…
â”œâ”€â”€ main.py                       # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â””â”€â”€ LICENSE                       # è®¸å¯è¯
```

## ğŸ”¬ æ ¸å¿ƒç®—æ³•è¯¦è§£

### 1. ä¸“æ³¨åº¦è¯„åˆ†æ¨¡å‹

ä¸“æ³¨åº¦åˆ†æ•°åŸºäºä»¥ä¸‹ç»´åº¦è®¡ç®—ï¼š

```python
ä¸“æ³¨åº¦åˆ†æ•° = w1 Ã— å§¿æ€åˆ†æ•° + w2 Ã— è§†çº¿åˆ†æ•° + w3 Ã— è¡¨æƒ…åˆ†æ•° + w4 Ã— æ—¶åºåˆ†æ•°

å…¶ä¸­ï¼š
- å§¿æ€åˆ†æ•°: å¤´éƒ¨åè½¬è§’åº¦ã€å€¾æ–œç¨‹åº¦ (0-1)
- è§†çº¿åˆ†æ•°: æ³¨è§†æ–¹å‘ä¸è®²å°çš„åŒ¹é…åº¦ (0-1)  
- è¡¨æƒ…åˆ†æ•°: çœ¼ç›å¼€åˆåº¦ã€æ‰“å“ˆæ¬ é¢‘ç‡ (0-1)
- æ—¶åºåˆ†æ•°: æ³¨æ„åŠ›æŒç»­æ—¶é—´ã€æ³¢åŠ¨æƒ…å†µ (0-1)
- æƒé‡: w1=0.3, w2=0.3, w3=0.2, w4=0.2
```

### 2. YOLOæ£€æµ‹ä¼˜åŒ–

é’ˆå¯¹è¯¾å ‚åœºæ™¯çš„æ¨¡å‹ä¼˜åŒ–ï¼š
- **æ•°æ®å¢å¼º**: å…‰ç…§å˜åŒ–ã€é®æŒ¡ã€å¤šè§’åº¦
- **é”šæ¡†è°ƒæ•´**: é€‚åº”æ•™å®¤è·ç¦»å’Œè§’åº¦
- **åå¤„ç†**: éæå¤§å€¼æŠ‘åˆ¶ + èº«ä»½å…³è”

### 3. å§¿æ€ä¼°è®¡æµç¨‹

```
è§†é¢‘å¸§ â†’ YOLOäººè„¸æ£€æµ‹ â†’ MediaPipeåœ°æ ‡ â†’ 
å¤´éƒ¨å§¿æ€è®¡ç®— â†’ è§†çº¿æ–¹å‘ä¼°è®¡ â†’ ä¸“æ³¨åº¦æ˜ å°„
```

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

### å®æ—¶ç›‘æµ‹ç•Œé¢
```
[æ‘„åƒå¤´ç”»é¢]
å­¦ç”ŸA: ä¸“æ³¨åº¦ 85% âœ“
å­¦ç”ŸB: ä¸“æ³¨åº¦ 62% âš 
å­¦ç”ŸC: ä¸“æ³¨åº¦ 91% âœ“

ç­çº§å¹³å‡: 79%
æ³¨æ„åŠ›ä¸é›†ä¸­: 1äºº
```

### åˆ†ææŠ¥å‘Š
```json
{
  "session_id": "class_20241218_0900",
  "duration": "90åˆ†é’Ÿ",
  "focus_statistics": {
    "average_score": 78.5,
    "peak_focus": 85.2,
    "attention_drop": 3,
    "distracted_time": "12åˆ†é’Ÿ"
  },
  "individual_reports": [
    {
      "student_id": "A001",
      "focus_score": 85,
      "attention_span": "45åˆ†é’Ÿ",
      "distraction_events": 2
    }
  ]
}
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯ï¼ˆå¤§ä½œä¸šé¡¹ç›®ï¼‰

### æ•™å­¦åº”ç”¨
- âœ… **å®æ—¶è¯¾å ‚ç›‘æ§**: æ•™å¸ˆå®æ—¶äº†è§£å­¦ç”ŸçŠ¶æ€
- âœ… **æ•™å­¦æ•ˆæœè¯„ä¼°**: åˆ†æä¸åŒæ•™å­¦æ–¹æ³•çš„å¸å¼•åŠ›
- âœ… **ä¸ªæ€§åŒ–è¾…å¯¼**: è¯†åˆ«éœ€è¦é¢å¤–å…³æ³¨çš„å­¦ç”Ÿ
- âœ… **è¯¾å ‚çºªå¾‹ç®¡ç†**: è‡ªåŠ¨æ£€æµ‹èµ°ç¥ã€ç¡è§‰ç­‰è¡Œä¸º

### ç ”ç©¶åº”ç”¨
- âœ… **æ•™è‚²å¿ƒç†å­¦ç ”ç©¶**: æ³¨æ„åŠ›ä¸å­¦ä¹ æ•ˆæœå…³ç³»
- âœ… **æ•™å­¦è®¾è®¡ä¼˜åŒ–**: è¯¾ç¨‹å†…å®¹å¸å¼•åŠ›åˆ†æ
- âœ… **åœ¨çº¿æ•™è‚²è¯„ä¼°**: è¿œç¨‹å­¦ä¹ ä¸“æ³¨åº¦ç›‘æµ‹

## âš™ï¸ é«˜çº§é…ç½®

### æ‘„åƒå¤´è®¾ç½®
```yaml
# configs/camera_calibration.yaml
camera:
  resolution: [1280, 720]
  fps: 30
  brightness: 1.0
  contrast: 1.1
  focus_distance: 2.0  # ç±³
```

### ä¸“æ³¨åº¦é˜ˆå€¼
```yaml
# configs/focus_scoring.yaml
thresholds:
  excellent: 85    # ä¼˜ç§€
  good: 70         # è‰¯å¥½
  average: 50      # ä¸€èˆ¬
  poor: 30         # è¾ƒå·®
```

### æ€§èƒ½ä¼˜åŒ–
```bash
# ä½¿ç”¨GPUåŠ é€Ÿ
python main.py --device cuda --batch-size 4

# è½»é‡æ¨¡å¼ (CPU)
python main.py --device cpu --model yolov8n --half
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æ‘„åƒå¤´æ— æ³•å¯åŠ¨**
```bash
# æ£€æŸ¥æ‘„åƒå¤´æƒé™
python -c "import cv2; print(cv2.VideoCapture(0).isOpened())"

# å°è¯•å…¶ä»–æ‘„åƒå¤´
python main.py --source 1
```

**Q: æ¨¡å‹ä¸‹è½½å¤±è´¥**
```bash
# æ‰‹åŠ¨ä¸‹è½½å¹¶æ”¾ç½®åˆ° data/models/
# YOLOv8n: https://github.com/ultralytics/assets/releases/download/v8.0.0/yolov8n.pt
```

**Q: è¿è¡Œé€Ÿåº¦æ…¢**
```bash
# é™ä½åˆ†è¾¨ç‡
python main.py --source 0 --img-size 640

# ä½¿ç”¨æ›´å°çš„æ¨¡å‹
python main.py --model yolov8n --img-size 416
```

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æ¨¡å‹ | å‡†ç¡®ç‡ | FPS (GPU) | FPS (CPU) | å†…å­˜å ç”¨ |
|------|--------|-----------|-----------|----------|
| YOLOv8n | 85% | 60 | 15 | 500MB |
| YOLOv8s | 90% | 45 | 8 | 1.2GB |
| YOLOv8m | 93% | 25 | 3 | 2.8GB |

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç å’Œå»ºè®®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request


## ğŸ™ è‡´è°¢

- [Ultralytics YOLO](https://github.com/ultralytics/ultralytics) - ä¼˜ç§€çš„YOLOå®ç°
- [MediaPipe](https://github.com/google/mediapipe) - å®æ—¶å§¿æ€ä¼°è®¡
- [OpenCV](https://opencv.org/) - è®¡ç®—æœºè§†è§‰åŸºç¡€åº“
- æ‰€æœ‰å¼€æºç¤¾åŒºçš„è´¡çŒ®è€…

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- Issue æäº¤: [GitHub Issues](https://github.com/2479767779/student-focus-yolo/issues)
- é‚®ç®±: 2479767779@qq.com

---

**æ³¨æ„**: æœ¬ç³»ç»Ÿä»…ä¾›æ•™å­¦ç ”ç©¶ä½¿ç”¨ï¼Œè¯·ç¡®ä¿åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­éµå®ˆç›¸å…³éšç§æ³•è§„ï¼Œè·å¾—å¿…è¦çš„æˆæƒå’ŒåŒæ„ã€‚

**ç‰ˆæœ¬**: v1.0.1
**æœ€åæ›´æ–°**: 2025-12-18